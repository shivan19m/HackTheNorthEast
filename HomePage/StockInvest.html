<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<title>StockInvest</title>-->
    <script type="module">
        import {db} from 'Firebase.js';
    </script>
    <script type="text/javascript">
       // import {db} from 'Firebase.js';
        function invest() {
            // import {db} from 'Firebase.js';
            const symbol = "IBM"
            const alphaAdvantageAPI = "S3OWN1COX84V4TCI"; //API key
            var url = "https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=" + symbol + "&apikey" + alphaAdvantageAPI
            const request = new XMLHttpRequest()
            request.open("GET", url)
            request.send();
            request.onreadystatechange=(ev => console.log(request.responseText))
            var multiplier = 1000; //could be changed depending on what makes most sense
            var obj = JSON.parse(request.responseText) //changes output to an object
            var closeValue = obj["05. price"];
            var openValue = obj["02. open"];
            db.collection("users").doc(userId).set({
                symbol : Stocksymbol,
            })
            if (openValue * numShares > db.collection("users").doc(userId).get(cashPoints));
                throw "Invalid amount invested";
            var amtGained = (closeValue - openValue)*numShares*multiplier;
        }
        var db;
        function sell (symbol, numShares){
            db.collection("users").set()
        }
    </script>
</head>
<body>

<p><a href="#" onClick="invest()">Top Text</a></p>

</body>
</html>